<%# locals: (page_context: nil, page_metadata: {}) %>

<div class="flex items-start w-full gap-3 p-2">
  <%= render "chats/ai_avatar" %>

  <div class="max-w-[85%] text-sm space-y-4 text-primary">
    <p><%= t("chats.ai_greeting.welcome", name: Current.user&.first_name || t("chats.ai_greeting.default_name")) %></p>

    <div class="space-y-3 mt-4">
      <% if page_context.present? %>
        <p class="text-xs text-secondary flex items-center gap-1">
          <%= icon(page_context_icon(page_context), size: "sm") %>
          <%= t("chats.ai_greeting.suggestions_for_page", page: page_context_name(page_context)) %>
        </p>
      <% else %>
        <p><%= t("chats.ai_greeting.suggestions_intro") %></p>
      <% end %>

      <% questions = contextual_chat_prompts(
           family: Current.family,
           page_context_key: page_context,
           metadata: page_metadata || {},
           count: 3
         ) %>

      <div class="space-y-2.5">
        <% questions.each do |question| %>
          <button data-action="chat#submitSampleQuestion"
                  data-chat-question-param="<%= question[:text] %>"
                  class="w-fit flex items-center gap-2 border border-secondary rounded-full py-1.5 px-2.5 hover:bg-container-inset hover:border-primary transition-colors">
            <%= icon(question[:icon]) %> <%= question[:text] %>
          </button>
        <% end %>
      </div>
    </div>
  </div>
</div>
